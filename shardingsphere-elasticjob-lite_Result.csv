Detection ID,Latest Commit ID,PMD Version,Rule Name,File Path,Violation Introducing Commit ID,VIC Date,VIC Line Num.,Latest Detection Commit ID,LDC ID Date,LDC Line Num.,Violation Fixed Commit ID,VFC Date,VFC Line Num.,Fixed Period(day),Original Code,Fixed Code,Really Fixed?,Time
34,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elastic-job-cloud/elastic-job-cloud-master/src/main/java/com/dangdang/ddframe/job/cloud/state/running/SlaveCache.java,1afc612590fc80adba68f08a6d8fa352e1f599df,1467823817,87,,,,6c4c1320a02f1909a82776d157dacf9da6d3c0f7,1467889639,-1,1467889639/1467823817,"        instance = null;","     private String getSlaveIdWithoutSequence(final String slaveId) {
         return slaveId.substring(0, slaveId.lastIndexOf(""-""));
     }
-    
-    void clear() {
-        instance = null;
-        RUNNING_TASKS.clear();
-    }
 }
",,1594
35,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elastic-job-cloud/elastic-job-cloud-scheduler/src/main/java/com/dangdang/ddframe/job/cloud/scheduler/restful/CloudJobRestfulApi.java,8c4e2b94a4f2c3e54ab67aebc59afa149abd8342,1483442134,134,fcac3cacf40073ec4c37ba08c3ee92c73e46a50d,1483672875,136,,,,,"            jobEventRdbSearch = null;",,,1594
36,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elastic-job-cloud/elastic-job-cloud-scheduler/src/main/java/com/dangdang/ddframe/job/cloud/scheduler/restful/CloudJobRestfulApi.java,4723a3f526a104c9b6334bb026417426665475fc,1484267454,136,,,,,,,,"            jobEventRdbSearch = null;",,,1594
37,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elastic-job-cloud/elastic-job-cloud-scheduler/src/main/java/com/dangdang/ddframe/job/cloud/scheduler/restful/CloudJobRestfulApi.java,25a1861d87231b5ea5892e041fe1cabdee18b0bb,1484655964,135,064eca0ab1804af654599bb06eae2ad6a1e59ea5,1498703901,124,,,,,"            jobEventRdbSearch = null;",,,1594
38,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elastic-job-cloud/elastic-job-cloud-scheduler/src/main/java/com/dangdang/ddframe/job/cloud/scheduler/restful/CloudJobRestfulApi.java,a0a8f7cda03878089dd99d990a9b435c537adb08,1485152467,117,7dc099541a16de49f024fc59e46377a726be7f6b,1491792590,122,,,,,"            jobEventRdbSearch = null;",,,1594
39,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elastic-job-cloud/elastic-job-cloud-scheduler/src/main/java/com/dangdang/ddframe/job/cloud/scheduler/mesos/MesosStateService.java,3b2637dd19759f0b24c1c6690a187cd7521bcf38,1488967428,71,dc13070bdce712d94bb2f2937e5220b9aa7c5169,1489064858,71,,,,,"        stateUrl = null;",,,1594
40,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elastic-job-cloud/elastic-job-cloud-scheduler/src/main/java/com/dangdang/ddframe/job/cloud/scheduler/mesos/MesosStateService.java,7dc099541a16de49f024fc59e46377a726be7f6b,1491792590,71,,,,,,,,"        stateUrl = null;",,,1594
41,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elasticjob-cloud/elasticjob-cloud-scheduler/src/main/java/org/apache/shardingsphere/elasticjob/cloud/scheduler/mesos/MesosStateService.java,bf6aff67e2901b0ce6f46ddf1aab29e2f77678ce,1594313692,69,de24213f19d18347767f524e4f54ff5416101dff,1594722605,69,,,,,"        stateUrl = null;",,,1594
42,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elasticjob-cloud/elasticjob-cloud-scheduler/src/main/java/org/apache/shardingsphere/elasticjob/cloud/scheduler/restful/CloudJobRestfulApi.java,bf6aff67e2901b0ce6f46ddf1aab29e2f77678ce,1594313692,117,,,,291fc9b91f6b442e1fa5c402981e32a852321287,1594563139,-1,1594563139/1594313692,"            jobEventRdbSearch = null;","         CloudJobRestfulApi.regCenter = regCenter;
         CloudJobRestfulApi.producerManager = producerManager;
         GsonFactory.registerTypeAdapter(CloudJobConfiguration.class, new CloudJobConfigurationGsonFactory.CloudJobConfigurationGsonTypeAdapter());
-        Optional<JobEventRdbConfiguration> jobEventRdbConfig = BootstrapEnvironment.getInstance().getJobEventRdbConfiguration();
-        if (jobEventRdbConfig.isPresent()) {
-            jobEventRdbSearch = new JobEventRdbSearch(jobEventRdbConfig.get().getDataSource());
-        } else {
-            jobEventRdbSearch = null;
-        }
+        Optional<TracingConfiguration> tracingConfiguration = BootstrapEnvironment.getInstance().getTracingConfiguration();
+        jobEventRdbSearch = tracingConfiguration.map(tracingConfiguration1 -> new JobEventRdbSearch((DataSource) tracingConfiguration1.getStorage())).orElse(null);
     }
     
     /**
",,1594
43,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elasticjob-cloud/elasticjob-cloud-executor/src/main/java/org/apache/shardingsphere/elasticjob/cloud/executor/local/LocalTaskExecutor.java,ca4050db6277a1ebfefd80e2d9bb75fd45d1ed11,1594555883,66,,,,8fd42ec9faa504f71d138993bc717b7594127286,1594560518,-1,1594560518/1594555883,"                elasticJob = null;"," /**
  * Local task executor.
  */
-@RequiredArgsConstructor
+@RequiredArgsConstructor(access = AccessLevel.PRIVATE)
 public final class LocalTaskExecutor {
     
-    private final LocalCloudJobConfiguration localCloudJobConfiguration;
+    private final ElasticJob elasticJob;
+    
+    private final String elasticJobType;
+    
+    private final JobConfiguration jobConfiguration;
+    
+    private final int shardingItem;
+    
+    public LocalTaskExecutor(final ElasticJob elasticJob, final JobConfiguration jobConfiguration, final int shardingItem) {
+        this(elasticJob, null, jobConfiguration, shardingItem);
+    }
+    
+    public LocalTaskExecutor(final String elasticJobType, final JobConfiguration jobConfiguration, final int shardingItem) {
+        this(null, elasticJobType, jobConfiguration, shardingItem);
+    }
     
     /**
      * Execute job.
      */
     @SuppressWarnings(""unchecked"")
     public void execute() {
-        CloudJobFacade jobFacade = new CloudJobFacade(getShardingContexts(), getJobTypeConfiguration(), new JobEventBus());
-        ElasticJob elasticJob;
-        switch (localCloudJobConfiguration.getTypeConfig().getJobType()) {
-            case SIMPLE:
-                elasticJob = getJobInstance(SimpleJob.class);
-                break;
-            case DATAFLOW:
-                elasticJob = getJobInstance(DataflowJob.class);
-                break;
-            default:
-                elasticJob = null;
-        }
-        if (null == elasticJob) {
-            new ElasticJobExecutor(""SCRIPT"", jobFacade.loadJobConfiguration(true), jobFacade).execute();
-        } else {
-            new ElasticJobExecutor(elasticJob, jobFacade.loadJobConfiguration(true), jobFacade).execute();
-        }
+        createElasticJobExecutor(new CloudJobFacade(getShardingContexts(), getJobTypeConfiguration(), new JobEventBus())).execute();
+    }
+    
+    private ElasticJobExecutor createElasticJobExecutor(final JobFacade jobFacade) {
+        return null == elasticJob
+                ? new ElasticJobExecutor(elasticJobType, jobConfiguration, jobFacade)
+                : new ElasticJobExecutor(elasticJob, jobConfiguration, jobFacade);
     }
     
     private ShardingContexts getShardingContexts() {
-        JobCoreConfiguration coreConfig = localCloudJobConfiguration.getTypeConfig().getCoreConfig();
         Map<Integer, String> shardingItemMap = new HashMap<>(1, 1);
-        shardingItemMap.put(localCloudJobConfiguration.getShardingItem(),
-                new ShardingItemParameters(coreConfig.getShardingItemParameters()).getMap().get(localCloudJobConfiguration.getShardingItem()));
-        return new ShardingContexts(Joiner.on(""@-@"").join(localCloudJobConfiguration.getJobName(), localCloudJobConfiguration.getShardingItem(), ""READY"", ""foo_slave_id"", ""foo_uuid""),
-                localCloudJobConfiguration.getJobName(), coreConfig.getShardingTotalCount(), coreConfig.getJobParameter(), shardingItemMap);
+        shardingItemMap.put(shardingItem, new ShardingItemParameters(jobConfiguration.getShardingItemParameters()).getMap().get(shardingItem));
+        return new ShardingContexts(Joiner.on(""@-@"").join(jobConfiguration.getJobName(), shardingItem, ""READY"", ""foo_slave_id"", ""foo_uuid""),
+                jobConfiguration.getJobName(), jobConfiguration.getShardingTotalCount(), jobConfiguration.getJobParameter(), shardingItemMap);
     }
     
     private JobTypeConfiguration getJobTypeConfiguration() {
         Map<String, String> jobConfigurationMap = new HashMap<>();
-        jobConfigurationMap.put(""jobClass"", localCloudJobConfiguration.getTypeConfig().getJobClass());
-        jobConfigurationMap.put(""jobType"", localCloudJobConfiguration.getTypeConfig().getJobType().name());
-        jobConfigurationMap.put(""jobName"", localCloudJobConfiguration.getJobName());
-        if (JobType.DATAFLOW == localCloudJobConfiguration.getTypeConfig().getJobType()) {
-            jobConfigurationMap.put(""streamingProcess"", Boolean.toString(((DataflowJobConfiguration) localCloudJobConfiguration.getTypeConfig()).isStreamingProcess()));
-        } else if (JobType.SCRIPT == localCloudJobConfiguration.getTypeConfig().getJobType()) {
-            jobConfigurationMap.put(""scriptCommandLine"", ((ScriptJobConfiguration) localCloudJobConfiguration.getTypeConfig()).getScriptCommandLine());
+        jobConfigurationMap.put(""jobName"", jobConfiguration.getJobName());
+        if (jobConfiguration.getProps().containsKey(""streaming.process"")) {
+            jobConfigurationMap.put(""streamingProcess"", jobConfiguration.getProps().getProperty(""streaming.process""));
+        }
+        if (jobConfiguration.getProps().containsKey(""script.command.line"")) {
+            jobConfigurationMap.put(""scriptCommandLine"", jobConfiguration.getProps().getProperty(""script.command.line""));
         }
         return JobTypeConfigurationUtil.createJobConfigurationContext(jobConfigurationMap);
     }
-    
-    private <T extends ElasticJob> T getJobInstance(final Class<T> clazz) {
-        Object result;
-        if (Strings.isNullOrEmpty(localCloudJobConfiguration.getApplicationContext())) {
-            String jobClass = localCloudJobConfiguration.getTypeConfig().getJobClass();
-            try {
-                result = Class.forName(jobClass).newInstance();
-            } catch (final ReflectiveOperationException ex) {
-                throw new JobSystemException(""Elastic-Job: Class '%s' initialize failure, the error message is '%s'."", jobClass, ex.getMessage());
-            }
-        } else {
-            result = new ClassPathXmlApplicationContext(localCloudJobConfiguration.getApplicationContext()).getBean(localCloudJobConfiguration.getBeanName());
-        }
-        return clazz.cast(result);
-    }
 }
",,1594
44,0373c58fd4be937e4c3bf347be1956f45d12950d9b93397478ad50d78479881426d7faf551126499c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,6.25,category/java/errorprone.xml/NullAssignment,./TargetProjects/shardingsphere-elasticjob-lite/elasticjob-cloud/elasticjob-cloud-scheduler/src/main/java/org/apache/shardingsphere/elasticjob/cloud/scheduler/mesos/MesosStateService.java,291fc9b91f6b442e1fa5c402981e32a852321287,1594563139,68,c6d712823bb9d6fb62480a1e33096f6fd9aafe1e,1594732907,69,,,,,"        stateUrl = null;",,,1594
